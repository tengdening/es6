<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<style>

</style>
<body>
	
</body>
<script>
	var MarryState=function(){
		var _currentState={},
			states = {
				jump: function(){
					console.log('跳跃');
				},
				move: function(){
					console.log('移动');
				},
				shoot: function(){
					console.log('射击');
				},
				squat: function(){
					console.log('蹲下');
				},
			},
		 	Action = {
				changeState: function(){
					var arg=arguments;
					_currentState={};
					if (arg.length) {
						for (var i = 0 , len=arg.length;i<len;i++){
							_currentState[arg[i]]=true;
						}
					}
					return this;
				},
				goes: function(){
					console.log('触发一次动作');
					for (var i in _currentState){
						states[i]&&states[i]();
					}
					return this;
				},
			};
		return {
			change: Action.changeState,
			goes: Action.goes,
		};
	}
	var marry=new MarryState;
	marry
		.change('jump','shoot')
		.goes()
		.goes()
		.change('shoot')
		.goes()
</script>
</html>